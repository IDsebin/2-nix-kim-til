# TIL Template

## 날짜: YYYY-MM-DD

### 스크럼
- 학습 목표 1 : 오늘 키워드 정리 


### 새로 배운 내용

### 동시성

한번에 여러 작업을 동시에 다루는 것 ( 시간과 관계없이 여러 작업이 처리되고 있는 상태 )

동시성의 핵심은 스위칭(switching)으로, 동시에 여러 작업을 수행하는 것이 아니라 스위칭 하며 여러 작업을 처리하는 것

독립적인 작업을 작은 단위의 연산으로 나누어 시간 분할 형태로 연산하고 논리적으로 동시에 실행하는 것처럼 보이게 하여 유휴 시간을 최소화 하는 구조

*유휴시간(컴퓨터가 작동 가능한데도 작업을 하지 않는 시간)



### 병렬성

다중 코어 cpu에서 한번에 여러 작업을 병렬적으로 처리하는 것 ( 시간상 동시에 처리 되고 있는 것 )

멀티 스레딩이랑 멀티 프로세싱은 병렬성 프로그래밍이 가능하다,

동시성은 논리적인 개념이고, 병렬성은 물리적인 개념이이서 둘은 공존 할 수 있다. 

병렬성으로 작업하면서 동시성을 가질 수  있다.

![image.png](attachment:37136128-74da-4adf-9443-ec4d4e8bc346:image.png)




### 동시성과 병렬성의 차이를 설명해주세요

| 동시성 | 병렬성 |
| --- | --- |
| 컨텍스트 스위칭을 통해 동시에 실행되는 것 같이 보이는 것 | 실제로 동시에 여러 작업이 처리되는 것 |
| 싱글 코어에서 멀티 쓰레드(Multi thread)를 동작 시키는 방식 | 멀티 코어에서 멀티 쓰레드(Multi thread)를 동작시키는 방식 |
| 한번에 많은 것을 처리 | 한번에 많은 일을 처리 |
| 논리적인 개념 | 물리적인 개념 |




### 컨텍스트 스위칭

CPU/코어에서 실행 중이던 프로세스/스레드가 다른 프로세스/스레드로 교체 되는 것

- 컨텍스트 스위칭은 OS 커널(각종 리소스를 관리/감독하는 역활) 에 의해 실행

두가지로 나눠지는데 …. 

1. 프로세스 컨텍스트 스위칭 (다른 프로세스끼리 스위칭)
2. 스레드 컨텍스트 스위칭 ( 같은 프로세스의 스레드들끼리 스위칭)

- 이 둘의 공통점
1. 커널 모드에서 실행 
2. cpu의 레지스터 상태를 교체

- 둘의 차이점

서로 다른 프로세스 안에 스레드끼리의 컨텍스트 스위칭은 안에 메모리 영역이 다르기 때문에 가상 메모리 주고 관련 처리를 추가로 수행해야 됨 

![image.png](attachment:4ed5a34c-202a-4e08-aef1-c10416e315a0:image.png)



### 컨텍스트 스위칭이 발생할 때 생기는 부정적인 영향에 대해서 설명해주세요

- 오버헤드

 스레드가 많으면 많을 수록 스위칭 횟수도 많아지고 덩달아 오버헤드도 많아져 성능이 저하 될 수 있다.

스레드 컨텍스트 스위칭 상황에서

- 컨텍스트 스위칭이 발생할 때마다, 레지스터 값을 저장하고 불러오는 작업이 필요하며, 이 과정에서 CPU 자원이 낭비됩니다.
- 짧은 시간 동안 많은 쓰레드가 생성 및 종료되는 경우, 오버헤드가 증가하여 성능이 저하될 수 있습니다.

- 캐시오염

CPU 내부에 캐시를 위한 공간이 있는데, 컨텍스트 스위칭을 하면, 캐시의 데이터가 현재 실행중인 스레드의 데이터가 아닐 수 있다. 

컨텍스트 스위칭 직후에는 캐시에 필요한 데이터가 없어서, 메모리에 접근해 데이터를 받아와야 하기 때문에 성능에 안좋은 영향을 줄 수 있다.




### 스레드풀을 사용하는 이유와 장단점에 대해서 설명해주세요

병렬 작업을 하기 위해 멀티 스레드를 구현하게 되는데, 스레드가 과도하게 증가하면 쓰레드 생성과 스케줄링으로 인해 CPU가 바빠져서 메모리 사용량이 급격히 늘어나는 문제점이 발생! 

성능도 저하

이걸 보완하기 위해 쓰레드 풀 사용!

쓰레드 풀은 작업 처리에 사용되는 스레드를 제한된 개수만큼 정해 놓고 작업 큐(Queue)에 들어오는 작업들을 하나씩 스레드가 맡아 처리하는 것이다. 작업 처리가 끝난 쓰레드는 다시 작업 큐에서 새로운 작업을 가져와 처리한다. 그렇기 때문에 작업 처리 요청이 증폭되어도 쓰레드의 전체 개수가 늘어나지 않으므로 애플리케이션의 성능이 급격히 저하되지 않는다.

장점

(1) 쓰레드 생성 및 수거 비용 절감

Thread Pool은 미리 만들어둔 쓰레드를 재사용하기 때문에 매번 새롭게 쓰레드를 생성/제거하는 비용이 줄어듭니다.

(2) 작업 요청 시 빠른 실행 가능

Thread Pool은 이미 생성된 쓰레드가 대기 중이기 때문에,작업 요청이 들어오면 즉시 실행할 수 있습니다.

(3) 시스템 자원 최적화

Thread Pool을 사용하면 시스템에서 관리할 쓰레드의 개수를 제한할 수 있습니다.

단점 

(1) 메모리 낭비 가능성

Thread Pool을 과도하게 설정하면 사용되지 않는 쓰레드가 계속 메모리를 차지할 수 있습니다.